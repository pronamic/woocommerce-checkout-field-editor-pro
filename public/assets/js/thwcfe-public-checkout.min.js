function thwcfeRemoveUploaded(elm,event){thwcfe_public_file_upload.remove_uploaded(elm,event)}function thwcfeChangeUploaded(elm,event){thwcfe_public_file_upload.change_uploaded(elm,event)}var thwcfe_auto_suggest=function($,window,document){if(thwcfe_public_var.api_key){var billing_address_key=thwcfe_public_var.billing_address_autofill;for(var key in billing_address_key)if(billing_address_key.hasOwnProperty(key))if("billing_address_1"==key)var billing_address_1_key=billing_address_key[key];else if("billing_city"==key)var billing_city_key=billing_address_key[key];else if("billing_state"==key)var billing_state_key=billing_address_key[key];else if("billing_country"==key)var billing_country_key=billing_address_key[key];else var billing_postcode_key=billing_address_key[key];var shipping_address_key=thwcfe_public_var.shipping_address_autofill;for(var key in shipping_address_key)if(shipping_address_key.hasOwnProperty(key))if("shipping_address_1"==key)var shipping_address_1_key=shipping_address_key[key];else if("shipping_city"==key)var shipping_city_key=shipping_address_key[key];else if("shipping_state"==key)var shipping_state_key=shipping_address_key[key];else if("shipping_country"==key)var shipping_country_key=shipping_address_key[key];else var shipping_postcode_key=shipping_address_key[key];if("yes"==thwcfe_public_var.enable_autofill){if(null!==document.getElementById(billing_address_1_key)&&function(){function fillInAddress(){clear_form_values();var place=autocomplete.getPlace();for(var field in place.address_components)for(var type in place.address_components[field].types)for(var adrs_fld in component_form)if(adrs_fld==place.address_components[field].types[type]){var prop=component_form[adrs_fld][1];place.address_components[field].hasOwnProperty(prop)&&("administrative_area_level_1"==adrs_fld||"administrative_area_level_2"==adrs_fld||"administrative_area_level_3"==adrs_fld?$("#"+component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change():component_form[adrs_fld][0]===billing_address_1_key?thwcfe_public_var.address_autofill_show_street_name_first?$("#"+component_form[adrs_fld][0]).val(getAddressComp("route")+" "+getAddressComp("premise")+" "+getAddressComp("street_number")).change():($("#"+component_form[adrs_fld][0]).val(getAddressComp("street_number")+" "+getAddressComp("premise")+" "+getAddressComp("route")).change(),$(document).trigger("thwcfe_after_billing_autofill",[component_form[adrs_fld][0],place])):$("#"+component_form[adrs_fld][0]).val(getAddressComp(place.address_components[field].types[type])).change())}fill_state_field(place)}function getAddressComp(type){var place=autocomplete.getPlace();for(var field in place.address_components)if(type===place.address_components[field].types[0])for(var adrs_fld in component_form)if(adrs_fld==type){var props=component_form[adrs_fld][1];return place.address_components[field][props]}return""}function clear_form_values(){for(var field in form_fields_value)$("#"+field).val("").change()}function set_autocomplete_country(){var country="";""!=(country=document.getElementById(billing_country_key).value)&&autocomplete.setComponentRestrictions({country:country})}function fill_state_field(place){if(""==document.getElementById(billing_state_key).value)for(var field in place.address_components)for(var type in place.address_components[field].types)"administrative_area_level_2"==place.address_components[field].types[type]&&$("#"+billing_state_key).val([place.address_components[field].short_name]).change()}var form_fields_value={billing_address_1:"",billing_address_2:"",billing_city:"",billing_state:"",billing_postcode:"",billing_country:""},component_form={premise:[billing_address_1_key,"short_name"],route:[billing_address_1_key,"long_name"],street_number:[billing_address_1_key,"long_name"],locality:[billing_city_key,"long_name"],postal_town:[billing_city_key,"long_name"],sublocality_level_1:[billing_city_key,"long_name"],administrative_area_level_1:[billing_state_key,"short_name"],administrative_area_level_2:[billing_state_key,"short_name"],administrative_area_level_3:[billing_state_key,"short_name"],country:[billing_country_key,"short_name"],postal_code:[billing_postcode_key,"short_name"]};autocomplete=new google.maps.places.Autocomplete(document.getElementById(billing_address_1_key),{types:["geocode"]}),autocomplete.addListener("place_changed",fillInAddress);var billing_country=document.getElementById(billing_country_key);null!=billing_country&&billing_country.addEventListener("change",function(event){set_autocomplete_country()},!0);var billing_address=document.getElementById(billing_address_1_key);null!=billing_address&&billing_address.addEventListener("focus",function(event){set_autocomplete_country()},!0)}(),null!==document.getElementById(shipping_address_1_key)&&function(){function fill_shipping_Address(){clear_shipping_form_values();var place=shipping_autocomplete.getPlace();for(var field in place.address_components)for(var type in place.address_components[field].types)for(var adrs_fld in shipping_component_form)if(adrs_fld==place.address_components[field].types[type]){var prop=shipping_component_form[adrs_fld][1];place.address_components[field].hasOwnProperty(prop)&&("administrative_area_level_1"==adrs_fld||"administrative_area_level_2"==adrs_fld||"administrative_area_level_3"==adrs_fld?$("#"+shipping_component_form[adrs_fld][0]).val([place.address_components[field][prop]]).change():shipping_component_form[adrs_fld][0]===shipping_address_1_key?thwcfe_public_var.address_autofill_show_street_name_first?$("#"+shipping_component_form[adrs_fld][0]).val(getAddressComp("route")+" "+getAddressComp("premise")+" "+getAddressComp("street_number")).change():$("#"+shipping_component_form[adrs_fld][0]).val(getAddressComp("street_number")+" "+getAddressComp("premise")+" "+getAddressComp("route")).change():$("#"+shipping_component_form[adrs_fld][0]).val(getAddressComp(place.address_components[field].types[type])).change())}fill_shipping_state_field(place)}function getAddressComp(type){var place=shipping_autocomplete.getPlace();for(var field in place.address_components)if(type===place.address_components[field].types[0])for(var adrs_fld in shipping_component_form)if(adrs_fld==type){var props=shipping_component_form[adrs_fld][1];return place.address_components[field][props]}return""}function clear_shipping_form_values(){for(var field in shipping_form_fields)$("#"+field).val("").change()}function set_autocomplete_shipping_country(){var country="";""!=(country=document.getElementById(shipping_country_key).value)&&shipping_autocomplete.setComponentRestrictions({country:country})}function fill_shipping_state_field(place){if(""==document.getElementById(shipping_state_key).value)for(var field in place.address_components)for(var type in place.address_components[field].types)"administrative_area_level_2"==place.address_components[field].types[type]&&$("#"+shipping_state_key).val([place.address_components[field].short_name]).change()}var shipping_form_fields={shipping_address_1:"",shipping_address_2:"",shipping_city:"",shipping_state:"",shipping_postcode:"",shipping_country:""},shipping_component_form={street_number:[shipping_address_1_key,"short_name"],route:[shipping_address_1_key,"long_name"],premise:[shipping_address_1_key,"short_name"],locality:[shipping_city_key,"long_name"],postal_town:[shipping_city_key,"long_name"],sublocality_level_1:[shipping_city_key,"long_name"],administrative_area_level_1:[shipping_state_key,"short_name"],administrative_area_level_2:[shipping_state_key,"short_name"],administrative_area_level_3:[shipping_state_key,"short_name"],country:[shipping_country_key,"short_name"],postal_code:[shipping_postcode_key,"short_name"]};shipping_autocomplete=new google.maps.places.Autocomplete(document.getElementById(shipping_address_1_key),{types:["geocode"]}),shipping_autocomplete.getPlace(),shipping_autocomplete.addListener("place_changed",fill_shipping_Address);var shipping_country=document.getElementById(shipping_country_key);null!=shipping_country&&shipping_country.addEventListener("change",function(event){set_autocomplete_shipping_country()},!0);var shipping_address=document.getElementById(shipping_address_1_key);null!=shipping_address&&shipping_address.addEventListener("focus",function(event){set_autocomplete_shipping_country()},!0)}(),null!=document.getElementById(billing_address_1_key)){var adrs_billing_field=document.getElementById(billing_address_1_key);google.maps.event.addDomListener(adrs_billing_field,"keydown",function(e){13==e.keyCode&&e.preventDefault()})}if(null!=document.getElementById(shipping_address_1_key)){var adrs_shipping_field=document.getElementById(shipping_address_1_key);google.maps.event.addDomListener(adrs_shipping_field,"keydown",function(e){13==e.keyCode&&e.preventDefault()})}}}}(window.jQuery,window,document),thwcfe_public_address_i18n=function($,window,document){"use strict";function locale_override_fix(){$(document.body).bind("country_to_state_changing",function(event,country,wrapper){thwcfe_public_var.is_override_required&&setTimeout(address_fields_required_validation_fix,500)})}function address_fields_required_validation_fix(){var thisform=$(".woocommerce-checkout"),locale_fields=$.parseJSON(wc_address_i18n_params.locale_fields);locale_fields&&$.each(locale_fields,function(key,value){var fids=value.split(",");$.each(fids,function(index,fid){var field=thisform.find(fid.trim());field.hasClass("thwcfe-required")?field_is_required(field,!0):field.hasClass("thwcfe-optional")&&field_is_required(field,!1)})})}function field_label_white_space_fix(field){var label=field.find("label").html();label&&(label=label.replace(/(?:^(?:&nbsp;)+)|(?:(?:&nbsp;)+$)/g,""),field.find("label").html(label.trim()))}function field_is_required(field,is_required){is_required?(field.find("label .optional").remove(),field.addClass("validate-required"),field_label_white_space_fix(field),0===field.find("label .required").length&&field.find("label").append('&nbsp;<abbr class="required" title="'+wc_address_i18n_params.i18n_required_text+'">*</abbr>')):(field.find("label .required").remove(),field.removeClass("validate-required woocommerce-invalid woocommerce-invalid-required-field"),field_label_white_space_fix(field),0===field.find("label .optional").length&&field.find("label").append('&nbsp;<span class="optional">('+wc_address_i18n_params.i18n_optional_text+")</span>"))}return{locale_override_fix:locale_override_fix}}(window.jQuery,window,document),thwcfe_public_base=function($,window,document){"use strict";function remove_duplicates(arr){return arr.filter(function(elem,index,self){return index==self.indexOf(elem)})}function remove_empty_values(arr){var result=arr;return $.isArray(arr)&&(result=arr.filter(function(elem,index,self){return!isEmpty(elem)})),result}function is_subset_of(set,subset){var is_subset=!0;return $.isArray(set)&&$.isArray(subset)&&$.each(subset,function(index,value){if(-1==$.inArray(value,set))return is_subset=!1,!1}),is_subset}function array_intersection(arr1,arr2){return $.map(arr1,function(a){return $.inArray(a,arr2)<0?null:a})}function is_empty_arr(value){var is_empty=!0;return Array.isArray(value)&&value.length&&(is_empty=!1),is_empty}function padZero(s,len,c){s=""+s;for(var c=c||"0";s.length<len;)s=c+s;return s}function uniqueId(length){for(var uid="",chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",len=chars.length,i=0;i<length;i++)uid+=chars.charAt(Math.floor(Math.random()*len));return uid}function isInt(value){return!isNaN(value)&&parseInt(Number(value))==value&&!isNaN(parseInt(value,10))}function isEmpty(val){return void 0===val||null==val||val.length<=0}function may_parse_date(dateStr,refDateObj){var dateObj=new Date(refDateObj.getTime());if(DATE_FORMAT_1.test(dateStr)){var date=new Date(dateStr),userTimezoneOffset=6e4*date.getTimezoneOffset(),newDate=new Date(date.getTime()-userTimezoneOffset);if(newDate)return newDate}else{if(DATE_FORMAT_3.test(dateStr)){var num=parseInt(dateStr);if(num>0){var newDateObj=new Date(dateObj.setDate(dateObj.getDate()+num));return newDateObj}var num=-1*num,newDateObj=new Date(dateObj.setDate(dateObj.getDate()-num));return newDateObj}var dateStrArr=dateStr.split(" ");if(dateStrArr.every(function(e){return/^[+-]?[0-9]+[YyMmDdHh]{1}$/.test(e)})){for(var i=0;i<dateStrArr.length;i++){var dateElm=dateStrArr[i],num=dateElm.match(/-?\d+/g).map(Number)[0],txt=dateElm.match(/[YyMmDdHh]{1}/).map(String)[0];if(num>0)switch(txt){case"Y":case"y":var dateObj=new Date(dateObj.setFullYear(dateObj.getFullYear()+num));break;case"M":case"m":var dateObj=new Date(dateObj.setMonth(dateObj.getMonth()+num));break;case"D":case"d":var dateObj=new Date(dateObj.setDate(dateObj.getDate()+num));break;case"H":case"h":var dateObj=new Date(dateObj.setHours(dateObj.getHours()+num))}else{var num=-1*num;switch(txt){case"Y":case"y":var dateObj=new Date(dateObj.setFullYear(dateObj.getFullYear()-num));break;case"M":case"m":var dateObj=new Date(dateObj.setMonth(dateObj.getMonth()-num));break;case"D":case"d":var dateObj=new Date(dateObj.setDate(dateObj.getDate()-num));break;case"H":case"h":var dateObj=new Date(dateObj.setHours(dateObj.getHours()-num))}}}return dateObj}}return dateStr}function isInputField(field){if(field&&field.length>0){var tagName=field[0].tagName.toLowerCase();if($.inArray(tagName,["input","select","textarea"])>-1)return!0}return!1}function isInputChoiceField(type,multiple){return!!("select"===type||"radio"===type||"checkbox"===type&&multiple)}function getInputField(key){var field=null;return key&&(field=$("#"+key),isInputField(field)||(field=$("input[name='"+key+"']"),isInputField(field)||(field=$("input[name='"+key+"[]']"),isInputField(field)||(field=$("input[name='"+key+"[0]']"))))),field}function prepare_date(dateStr,format,strict){var date=null;if(!isEmpty(dateStr))try{date=$.datepicker.parseDate(format,dateStr),date.setHours(0,0,0,0)}catch(err){if(!strict){var pattern=dateStr.split(" "),years=null,months=null,days=null;if(pattern.length>0)for(var i=0;i<pattern.length;i++){var x=pattern[i];x=x.toLowerCase(),-1!=x.indexOf("y")?(x=x.replace(/y/gi,""),years=parseInt(x)):-1!=x.indexOf("m")?(x=x.replace(/m/gi,""),months=parseInt(x)):-1!=x.indexOf("d")&&(x=x.replace(/d/gi,""),days=parseInt(x))}isEmpty(years)&&isEmpty(months)&&isEmpty(days)||(date=new Date,date.setHours(0,0,0,0),years&&0!=years&&date.setFullYear(date.getFullYear()+years),months&&0!=months&&date.setMonth(date.getMonth()+months),days&&0!=days&&date.setDate(date.getDate()+days))}}return date}function compare_dates(field,cvalue){var result=null,value=field.val(),format=field.data("date-format");if(isEmpty(value)||isEmpty(cvalue))return null;var d1=prepare_date(value,format,!0),d2=prepare_date(cvalue,format,!1);if(d1&&d2)try{d1>d2?result=1:d1<d2?result=-1:d1.getTime()===d2.getTime()&&(result=0)}catch(err){result=null}return result}function is_same_date(date1,date2){if(date1&&date2){var day1=date1.getDate(),month1=date1.getMonth()+1,year1=date1.getFullYear(),day2=date2.getDate(),month2=date2.getMonth()+1,year2=date2.getFullYear(),matchYear=!(!isInt(day1)||!isInt(day2)||day1!=day2),matchMonth=!(!isInt(month1)||!isInt(month2)||month1!=month2),matchDay=!(!isInt(year1)||!isInt(year2)||year1!=year2);return matchYear&&matchMonth&&matchDay}return!1}function is_date_eq(field,cvalue){var result=compare_dates(field,cvalue),ftype=field.getType();if("date"===ftype||"datetime-local"===ftype){var value=get_field_value(ftype,field,null);cvalue=new Date(cvalue).getTime(),value=new Date(value),value=value.setHours(0,0,0,0),value&&(value=new Date(value).getTime()),cvalue===value&&(result=0)}return null!=result&&0===result}function is_date_gt(field,cvalue){var result=compare_dates(field,cvalue),ftype=field.getType();if("date"===ftype||"datetime-local"===ftype){var value=get_field_value(ftype,field,null);cvalue=new Date(cvalue).getTime(),value=new Date(value),value=value.setHours(0,0,0,0),value&&(value=new Date(value).getTime()),cvalue<value&&(result=1)}return null!=result&&1===result}function is_date_lt(field,cvalue){var result=compare_dates(field,cvalue),ftype=field.getType();if("date"===ftype||"datetime-local"===ftype){var value=get_field_value(ftype,field,null);cvalue=new Date(cvalue).getTime(),value=new Date(value),value=value.setHours(0,0,0,0),value&&(value=new Date(value).getTime()),cvalue>value&&(result=-1)}return null!=result&&-1===result}function is_day_eq(field,cvalue){var result=!1,type=field.getType();if(!isEmpty(cvalue)){var value=field.val();if("date"===type||"datetime-local"===type)var format="yy-mm-dd";else var format=field.data("date-format");"datetime-local"===type&&(value=value.replace("T"," "));var date=prepare_date(value,format,!0);if(date){var day=date.getDay();if(isInt(cvalue))cvalue=parseInt(cvalue),result=null!=day&&day===cvalue;else if(cvalue=cvalue.toLowerCase(),$.inArray(cvalue,weekDays)>=0){var daystring=weekDays[day];result=null!=daystring&&daystring===cvalue}}}return result}function setup_enhanced_select(form,class_selector,data){form.find("select."+class_selector).each(function(){var ms=$(this);ms.selectWoo({allowClear:!0,placeholder:ms.data("placeholder"),maximumSelectionLength:ms.data("maxselections"),language:data.language}).addClass("enhanced")})}function calculate_minutes_from_hr_min(_hour,_min){var minutes=null;return isInt(_hour)&&isInt(_min)&&(minutes=60*_hour+_min),minutes}function get_minutes_from_time_24hr(time){var minutes=null,timeArr=time.split(":");if(2==timeArr.length){minutes=calculate_minutes_from_hr_min(parseInt(timeArr[0]),parseInt(timeArr[1]))}return minutes}function no_specific_days(date,disableDays){var day=date.getDay(),daystring=weekDays[day];return[-1==disableDays.indexOf(daystring),""]}function no_specific_dates(date,datestring){var day=date.getDate(),month=date.getMonth()+1,year=date.getFullYear(),dateArr=datestring.split("-");if(3==dateArr.length){var matchYear=!isInt(dateArr[0])||dateArr[0]==year,matchMonth=!isInt(dateArr[1])||dateArr[1]==month,matchDay=!isInt(dateArr[2])||dateArr[2]==day;return isInt(dateArr[0])||isInt(dateArr[1])||isInt(dateArr[2])?[!(matchYear&&matchMonth&&matchDay),""]:[!0,""]}if(LINKED_DATE_FORMAT.test(datestring)){var sd=get_linked_datepicker_selected_date(datestring,"disabled");return sd?[!is_same_date(date,sd),""]:[!0,""]}var _now=new Date;if(is_same_date(date,_now)){var _hour=_now.getHours(),_min=_now.getMinutes(),op="eq";-1!=datestring.indexOf("+")?(op="gt",datestring=datestring.replace("+","")):-1!=datestring.indexOf("-")&&(op="lt",datestring=datestring.replace("-",""));var _minutes=calculate_minutes_from_hr_min(_hour,_min),minutes=get_minutes_from_time_24hr(datestring);if(isInt(minutes)&&isInt(_minutes)&&("eq"===op&&_minutes==minutes||"gt"===op&&_minutes>minutes||"lt"===op&&_minutes<minutes))return[!1,""]}return[!0,""]}function disable_dates(date){var disabledDays=$(this).data("disabled-days");return is_disabled_date(date,$(this).data("disabled-dates"))||is_disabled_day(date,disabledDays)?[!1,""]:[!0,""]}function find_possible_default_date(defaultDate,minDate,maxDate,disabledDays,disabledDates){if(!defaultDate)return!1;minDate&&defaultDate<minDate&&(defaultDate=minDate),maxDate&&defaultDate>maxDate&&(defaultDate=maxDate);var disabledDefaultDate=is_disabled_date(defaultDate,disabledDates)||is_disabled_day(defaultDate,disabledDays);if(defaultDate<maxDate)for(;disabledDefaultDate&&defaultDate<maxDate;){var newDate=defaultDate.setDate(defaultDate.getDate()+1);defaultDate=new Date(newDate);var disabledDefaultDate=is_disabled_date(defaultDate,disabledDates)||is_disabled_day(defaultDate,disabledDays)}else for(;disabledDefaultDate;){var newDate=defaultDate.setDate(defaultDate.getDate()+1);defaultDate=new Date(newDate);var disabledDefaultDate=is_disabled_date(defaultDate,disabledDates)||is_disabled_day(defaultDate,disabledDays)}return(is_disabled_date(defaultDate,disabledDates)||is_disabled_day(defaultDate,disabledDays))&&(defaultDate=""),defaultDate}function is_disabled_date(date,disabledDates){if(disabledDates&&disabledDates.length>0){var datesArr=disabledDates.split(",");if(datesArr.length>0)for(var i=0;i<datesArr.length;i++){var disabledDate=no_specific_dates(date,datesArr[i].trim());if(!disabledDate[0])return!0}}return!1}function is_disabled_day(date,disabledDays){if(disabledDays&&disabledDays.length>0){return!no_specific_days(date,disabledDays.split(","))[0]}return!1}function get_linked_datepicker_selected_date(dateStr,option){var sd=null;if(LINKED_DATE_FORMAT.test(dateStr)){var linkedDate=dateStr.replace(/[{}]/g,"");if(linkedDate){var dp=$("#"+linkedDate);dp.length&&(sd=dp.datepicker("getDate"))}}return sd}function check_if_linked_date(dateStr,targetDp,option){if(LINKED_DATE_FORMAT.test(dateStr)){var linkedDate=dateStr.replace(/[{}]/g,"");if(linkedDate){var dp=$("#"+linkedDate);dp.length&&dp.datepicker("option","onSelect",function(dateText,inst){if("minDate"===option){var df=dp.data("date-format"),dpDate=prepare_date(dateText,df,!0),nextDate=new Date(dpDate.getTime()+864e5);targetDp.datepicker("option","minDate",nextDate)}else"maxDate"===option&&targetDp.datepicker("option","maxDate",dp.datepicker("getDate"))})}dateStr=""}return dateStr}function setup_date_picker(form,class_selector,data){form.find("."+class_selector).each(function(){var dateFormat=$(this).data("date-format"),defaultDate=$(this).data("default-date"),maxDate=$(this).data("max-date"),minDate=$(this).data("min-date"),yearRange=$(this).data("year-range"),numberOfMonths=$(this).data("number-months"),firstDay=$(this).data("first-day"),disabledDays=$(this).data("disabled-days"),disabledDates=$(this).data("disabled-dates"),nowDateObj=new Date;if(data.force_server_time_for_date_picker)var nowDateObj=new Date(data.wp_date_time);if(maxDate=may_parse_date(maxDate,nowDateObj),minDate=may_parse_date(minDate,nowDateObj),defaultDate=may_parse_date(defaultDate,nowDateObj),maxDate=check_if_linked_date(maxDate,$(this),"maxDate"),minDate=check_if_linked_date(minDate,$(this),"minDate"),"[object Date]"===Object.prototype.toString.call(defaultDate)&&(defaultDate=find_possible_default_date(defaultDate,minDate,maxDate,disabledDays,disabledDates)),dateFormat=""==dateFormat?"dd/mm/yy":dateFormat,defaultDate=""==defaultDate?null:defaultDate,maxDate=""==maxDate?null:maxDate,minDate=""==minDate?null:minDate,yearRange=""==yearRange?"-100:+1":yearRange,numberOfMonths=numberOfMonths>0?numberOfMonths:1,!defaultDate){var value=$(this).val();value.trim()&&(defaultDate=value)}var showButtonPanel=!!data.dp_show_button_panel&&data.dp_show_button_panel,changeMonth=!!data.dp_change_month&&data.dp_change_month,changeYear=!!data.dp_change_year&&data.dp_change_year,preventCloseOnSelect=!!data.dp_prevent_close_onselect&&data.dp_prevent_close_onselect;$(this).datepicker({defaultDate:defaultDate,maxDate:maxDate,minDate:minDate,yearRange:yearRange,numberOfMonths:numberOfMonths,showButtonPanel:showButtonPanel,changeMonth:changeMonth,changeYear:changeYear}),$(this).datepicker("option",$.datepicker.regional[data.language]),$(this).datepicker("option","dateFormat",dateFormat),$(this).datepicker("option","beforeShowDay",disable_dates),$(this).datepicker("option","firstDay",firstDay),$(this).datepicker("setDate",defaultDate),data.readonly_date_field&&$(this).prop("readonly",!0),preventCloseOnSelect&&($.datepicker._selectDateOverload=$.datepicker._selectDate,$.datepicker._selectDate=function(id,dateStr){var target=$(id),inst=this._getInst(target[0]);inst.inline=!0,$.datepicker._selectDateOverload(id,dateStr),inst.inline=!1,this._updateDatepicker(inst)})}),data.notranslate_dp&&$(".ui-datepicker").addClass("notranslate")}function setup_time_picker_linked_date(form,class_selector,data){$("."+class_selector).change(function(){var dp=$(this),tp=$(".thwcfe-linked-date-"+dp.prop("id"));tp.length&&adjust_time_slots_based_on_date_selected(dp,tp,data)})}function apply_input_masking(elm){var data=$(elm).data("mask-pattern"),alias_items=["datetime","numeric","cssunit","url","IP","email","mac","vin"];-1!==$.inArray(data,alias_items)?$(elm).inputmask({alias:data}):$(elm).inputmask({mask:data,onincomplete:function(){add_unvalidated_fields(this)},oncomplete:function(){remove_validated_fields(this)}})}function add_unvalidated_fields(elm){var name=($(elm),$(elm).prop("name")),unvalidated_fields=$("#thwcfe_unvalidated_fields").val(),unvalidated_fields_array=unvalidated_fields?unvalidated_fields.split(","):[];unvalidated_fields_array.push(name),unvalidated_fields=unvalidated_fields_array.toString(),$("#thwcfe_unvalidated_fields").val(unvalidated_fields)}function remove_validated_fields(elm){var name=($(elm),$(elm).prop("name")),unvalidated_fields=$("#thwcfe_unvalidated_fields").val(),unvalidated_fields_array=unvalidated_fields?unvalidated_fields.split(","):[];unvalidated_fields_array=jQuery.grep(unvalidated_fields_array,function(value){return value!=name}),unvalidated_fields=unvalidated_fields_array.toString(),$("#thwcfe_unvalidated_fields").val(unvalidated_fields)}function split_hour_min(hourMinStr){var hours=0,minutes=0;if(hourMinStr&&("string"==typeof hourMinStr||hourMinStr instanceof String)){var _hourMin=hourMinStr.split(" ");if(_hourMin.length>0)for(var i=0;i<_hourMin.length;i++){var x=_hourMin[i];x=x.toLowerCase(),-1!=x.indexOf("h")?(x=x.replace(/h/gi,""),hours=parseInt(x)):-1!=x.indexOf("m")&&(x=x.replace(/m/gi,""),minutes=parseInt(x))}hours=hours||0,minutes=minutes||0,minutes>=60&&(hours+=1,minutes=0)}return[hours,minutes]}function get_start_hr_min(startTime){var timeInfo={};if(startTime){var startTimeArr=split_hour_min(startTime);if(startTimeArr.length>1){var currTime=new Date;if(thwcfe_public_var.force_server_time_for_time_picker)var currTime=new Date(thwcfe_public_var.wp_date_time);var currHour=currTime.getHours(),currMin=currTime.getMinutes(),_startHour=startTimeArr[0],startDays=parseInt(_startHour/24),startDate=new Date;if(thwcfe_public_var.force_server_time_for_time_picker)var startDate=new Date(thwcfe_public_var.wp_date_time);startDate.addDays(startDays).setHours(0,0,0,0);var startHour=_startHour%24,startMin=startTimeArr[1];startHour=currHour+startHour,startMin=currMin+startMin,startMin>=60?(startHour++,startMin-=60):startMin<0&&(startHour--,startMin=60+startMin),timeInfo.startDate=startDate,timeInfo.startDays=startDays,timeInfo.startHour=startHour,timeInfo.startMin=startMin,timeInfo.hour=startTimeArr[0],timeInfo.min=startTimeArr[1]}}return timeInfo}function get_time_suffix(time){var suffix="";return time&&(time=time.toLowerCase(),-1!=time.indexOf("am")?suffix="am":-1!=time.indexOf("pm")&&(suffix="pm")),suffix}function split_time_string(time,ampm){time=time.replace(/pm/gi,""),time=time.replace(/am/gi,"");var timeArr=time.split(":"),hours=parseInt(timeArr[0]),minutes=parseInt(timeArr[1]);return"pm"==ampm&&hours<12?hours+=12:"am"==ampm&&12==hours&&(hours-=12),[hours,minutes]}function split_time_string_12hr(time){return split_time_string(time,get_time_suffix(time))}function get_disabled_time_ranges(minTime,maxTime,startTime){var minHour=minTime[0],minMin=minTime[1],startHour=(maxTime[0],maxTime[1],startTime.startHour),startMin=startTime.startMin,startDate=new Date;if(thwcfe_public_var.force_server_time_for_time_picker)var startDate=new Date(thwcfe_public_var.wp_date_time);return startDate.setHours(startHour,startMin,0,0),minHour=padZero(minHour,2),minMin=padZero(minMin,2),startHour=padZero(startHour,2),startMin=padZero(startMin,2),[[minHour+":"+minMin,startHour+":"+startMin]]}function disable_all_time_slots(tp,minTime,maxTime){var suffixMaxTime=get_time_suffix(maxTime),maxTimeArr=split_time_string(maxTime,suffixMaxTime),maxHour=maxTimeArr[0],maxMin=maxTimeArr[1];maxHour=padZero(maxHour,2),maxMin=padZero(parseInt(maxMin)+1,2);var newMaxTime=maxHour+":"+maxMin;tp.timepicker("option","disableTimeRanges",[[minTime,newMaxTime]])}function adjust_time_slots_based_on_date_selected(dp,tp,data){var dpDate=null;if(dp){var df=dp.data("date-format");dpDate=prepare_date(dp.val(),df,!0)}var minTime=tp.data("min-time"),maxTime=tp.data("max-time"),startTime=tp.data("start-time"),disableTime=tp.data("disable-time"),startTimeArr=get_start_hr_min(startTime);if(startTimeArr){var startDate=startTimeArr.startDate;if(null!=dp&&dpDate<startDate)disable_all_time_slots(tp,minTime,maxTime);else if(null!=dp&&dpDate>startDate)if(disableTime){var disabledTimeRange=disable_time_slots_based_on_disable_time(tp,data,disabledTimeRanges=null);tp.timepicker("option","disableTimeRanges",disabledTimeRange)}else tp.timepicker("option","disableTimeRanges",[]);else{var minTimeArr=split_time_string_12hr(minTime),minHour=minTimeArr[0],minMin=minTimeArr[1],maxTimeArr=split_time_string_12hr(maxTime),maxHour=maxTimeArr[0],maxMin=maxTimeArr[1],startHour=startTimeArr.startHour,startMin=startTimeArr.startMin;if(startHour>maxHour||startHour==maxHour&&startMin>maxMin)if(data.restrict_time_slots_for_same_day)disable_all_time_slots(tp,minTime,maxTime);else{var disabledTimeRanges=get_disabled_time_ranges(minTimeArr,maxTimeArr,startTimeArr);tp.timepicker("option","disableTimeRanges",disabledTimeRanges)}else if(startHour<minHour||startHour==minHour&&startMin<minMin)if(disableTime){var disabledTimeRange=disable_time_slots_based_on_disable_time(tp,data,disabledTimeRanges=null);tp.timepicker("option","disableTimeRanges",disabledTimeRange)}else tp.timepicker("option","disableTimeRanges",[]);else{var disabledTimeRanges=get_disabled_time_ranges(minTimeArr,maxTimeArr,startTimeArr);disableTime&&(disabledTimeRanges=disable_time_slots_based_on_disable_time(tp,data,disabledTimeRanges)),tp.timepicker("option","disableTimeRanges",disabledTimeRanges)}}}}function disable_time_slots_based_on_disable_time(tp,data,disabledTimeRanges){for(var disabledTimeRangeArr=[],disableTime=tp.data("disable-time"),timeArr=disableTime.split(","),i=0;i<timeArr.length;i++){var TimeRangeArr=timeArr[i].split("-");TimeRangeArr&&disabledTimeRangeArr.push(TimeRangeArr)}return disabledTimeRanges&&disabledTimeRangeArr.push(disabledTimeRanges[0]),disabledTimeRangeArr}function setup_time_picker(form,class_selector,data){form.find("."+class_selector).each(function(){var minTime=$(this).data("min-time"),maxTime=$(this).data("max-time"),step=$(this).data("step"),format=$(this).data("format"),linkedDate=($(this).data("start-time"),$(this).data("linked-date"));$(this).data("disable-time");minTime=minTime||"12:00am",maxTime=maxTime||"11:30pm",step=step||"30",format=format||"h:i A";var args={minTime:minTime,maxTime:maxTime,step:step,timeFormat:format,forceRoundTime:!0,disableTextInput:!0,disableTouchKeyboard:!0,lang:data.lang};if($(this).timepicker(args),linkedDate){var dp=$("#"+linkedDate);dp.length&&adjust_time_slots_based_on_date_selected(dp,$(this),data)}else adjust_time_slots_based_on_date_selected(null,$(this),data)})}function display_char_count(elm,isCount){var fid=elm.prop("id"),len=elm.val().length,displayElm=$("#"+fid+"-char-count");if(isCount)displayElm.text("("+len+" characters)");else{var maxLen=elm.prop("maxlength"),left=maxLen-len;displayElm.text("("+left+" characters left)"),rem<0&&displayElm.css("color","red")}}function set_field_value_by_elm(elm,type,value){switch(type){case"radio":elm.val([value]);break;case"checkbox":1==elm.data("multiple")?(value=value||[],elm.val(value)):elm.val([value]);break;case"select":elm.prop("multiple")?elm.val(value):elm.val([value]);break;default:elm.val(value)}}function clean_multifield_value(value){return value=remove_empty_values(value),value=$.isArray(value)&&0==value.length?"":value}function get_field_value(type,elm,name){var value="";switch(type){case"radio":value=$("input[type=radio][name='"+name+"']:checked").val();break;case"checkbox":if(1==elm.data("multiple")){var valueArr=[];$("input[type=checkbox][name='"+name+"[]']:checked").each(function(){valueArr.push($(this).val())}),value=clean_multifield_value(valueArr)}else value=$("input[type=checkbox][name='"+name+"']:checked").val();break;case"select":elm.prop("multiple")?(value=elm.val(),
value=clean_multifield_value(value)):elm.hasClass("thwcfe-disabled-field")||(value=elm.val());break;case"multiselect":value=elm.val(),value=clean_multifield_value(value);break;default:value=elm.val()}return value}function get_field_name(type,name,id,multiple){return"checkbox"==type&&multiple?name=name.replace("[]",""):"select"==type&&multiple&&(name=id),name}var LINKED_DATE_FORMAT=/^{[a-z\_]+[a-z0-9\_]*}$/,DATE_FORMAT_1=/^(19|20)\d{2}-(0?[1-9]|1[0-2])-(0?[1-9]|1\d|2\d|3[01])$/,DATE_FORMAT_3=/^[+-]?\d+$/,weekDays=["sun","mon","tue","wed","thu","fri","sat"];return Date.prototype.addDays=function(days){return this.setDate(this.getDate()+parseInt(days)),this},$.fn.getType=function(){try{return"INPUT"==this[0].tagName?this[0].type.toLowerCase():this[0].tagName.toLowerCase()}catch(err){return"E001"}},$(".thwcfe-char-count").keyup(function(){display_char_count($(this),!0)}),$(".thwcfe-char-left").keyup(function(){display_char_count($(this),!1)}),{setup_enhanced_select:setup_enhanced_select,setup_date_picker:setup_date_picker,setup_time_picker:setup_time_picker,setup_time_picker_linked_date:setup_time_picker_linked_date,display_char_count:display_char_count,remove_duplicates:remove_duplicates,is_subset_of:is_subset_of,array_intersection:array_intersection,is_empty_arr:is_empty_arr,set_field_value_by_elm:set_field_value_by_elm,get_field_value:get_field_value,get_field_name:get_field_name,isInputField:isInputField,isInputChoiceField:isInputChoiceField,getInputField:getInputField,is_date_eq:is_date_eq,is_date_gt:is_date_gt,is_date_lt:is_date_lt,is_day_eq:is_day_eq,uniqueId:uniqueId,isEmpty:isEmpty,apply_input_masking:apply_input_masking}}(window.jQuery,window,document),thwcfe_public_conditions=function($,window,document){"use strict";function ship_to_diff_address(){var checked=!1,ship_to_different_address_elm="#ship-to-different-address-checkbox";if(thwcfe_public_var.use_custom_ship_to_different_address_css_selector)var ship_to_different_address_elm=thwcfe_public_var.custom_ship_to_different_address_css_selector;return $(ship_to_different_address_elm).length>0&&(checked=$(ship_to_different_address_elm).is(":checked")),checked}function is_disabled_shipping_field(elm){return!(ship_to_diff_address()||!elm.hasClass("thwcfe-shipping-field"))}function skip_marking_as_disabled_field(name,ship_to_diff_addr_trgr){var def_shipping_fields=["shipping_first_name","shipping_last_name","shipping_company","shipping_address_1","shipping_address_2","shipping_country","shipping_state","shipping_city","shipping_postcode"];return!(!ship_to_diff_addr_trgr||!def_shipping_fields.includes(name))}function get_input_elm(field){return"hidden"===field.getType()?field:field.find(":input.thwcfe-input-field")}function get_input_id(elm,type){var fid=null;return"radio"==type?fid=elm.prop("name"):"checkbox"==type?(fid=elm.prop("name"),fid=fid.replace("[]","")):fid=elm.prop("id"),fid}function get_dependant_fields(elm){var dep_fields=null,dep_fields_str=elm.data("fields");return dep_fields_str&&(dep_fields=dep_fields_str.split(","))&&dep_fields.length>0&&(dep_fields=thwcfe_public_base.remove_duplicates(dep_fields)),dep_fields}function set_field_value(elm,type){var value=elm.data("current-value");value&&thwcfe_public_base.set_field_value_by_elm(elm,type,value)}function clear_field_value(elm,type,id){elm.data("current-value",thwcfe_public_base.get_field_value(type,elm,id)),thwcfe_public_base.set_field_value_by_elm(elm,type,"")}function add_to_disabled(elm,name){if(elm&&name){var dis_names_str=elm.val(),dis_names_arr=dis_names_str?dis_names_str.split(","):[];dis_names_arr.push(name),dis_names_str=dis_names_arr.toString(),elm.val(dis_names_str)}}function remove_from_disabled(elm,name){if(elm&&name){var dis_names_str=elm.val(),dis_names_arr=dis_names_str?dis_names_str.split(","):[];dis_names_arr=jQuery.grep(dis_names_arr,function(value){return value!=name}),dis_names_str=dis_names_arr.toString(),elm.val(dis_names_str)}}function add_to_disabled_sections(name){add_to_disabled($("#thwcfe_disabled_sections"),name)}function remove_from_disabled_sections(name){remove_from_disabled($("#thwcfe_disabled_sections"),name)}function add_to_disabled_fields(name,ship_to_diff_addr_trgr){if(!skip_marking_as_disabled_field(name,ship_to_diff_addr_trgr)){add_to_disabled($("#thwcfe_disabled_fields"),name)}}function remove_from_disabled_fields(name){if(name){remove_from_disabled($("#thwcfe_disabled_fields"),name)}}function disable_field_validations(elm){var validations=elm.data("validations");validations&&(elm.removeClass(validations),elm.removeClass("woocommerce-validated woocommerce-invalid woocommerce-invalid-required-field"))}function enable_field_validations(elm){var validations=elm.data("validations");elm.removeClass("woocommerce-validated woocommerce-invalid woocommerce-invalid-required-field"),validations&&elm.addClass(validations)}function enable_disable_price_fields(wrapper,enable,trigger_price_calc){var price_fields=wrapper.find(".thwcfe-price-field");price_fields.length&&(enable?price_fields.removeClass("thwcfe-disabled-shipping-field"):price_fields.addClass("thwcfe-disabled-shipping-field"),trigger_price_calc&&thwcfe_public_price.may_calculate_extra_cost())}function enable_price_fields(wrapper,trigger_price_calc){enable_disable_price_fields(wrapper,!0,trigger_price_calc)}function disable_price_fields(wrapper,trigger_price_calc){enable_disable_price_fields(wrapper,!1,trigger_price_calc)}function hide_section(celm,needSetup){var sid=celm.prop("id");celm.hide(),celm.addClass("thwcfe-disabled-section"),celm.find(".thwcfe-input-field-wrapper").length&&celm.find(".thwcfe-input-field-wrapper").each(function(){disable_field_validations($(this))}),add_to_disabled_sections(sid);disable_price_fields(celm,!1)}function show_section(celm,needSetup){var sid=celm.prop("id");celm.show(),celm.removeClass("thwcfe-disabled-section"),celm.find(".thwcfe-input-field-wrapper").length&&celm.find(".thwcfe-input-field-wrapper:not(.thwcfe-disabled-field-wrapper)").each(function(){enable_field_validations($(this))}),remove_from_disabled_sections(sid);enable_price_fields(celm,!1)}function hide_field(cfield,needSetup,ship_to_diff_addr_trgr){var fid="";if(cfield.hasClass("thwcfe-html-field-wrapper"))cfield.hide(),fid=cfield.data("name");else{var cinput=get_input_elm(cfield);if(cinput.hasClass("thwcfe-disabled-field")&&!cinput.is(":visible"))return;var ftype=cinput.getType();fid=get_input_id(cinput,ftype),cfield.hide(),clear_field_value(cinput,ftype,fid),cinput.addClass("thwcfe-disabled-field"),cfield.addClass("thwcfe-disabled-field-wrapper");var change_event_disabled_fields=thwcfe_public_var.change_event_disabled_fields,change_e_disabled_fields=change_event_disabled_fields?change_event_disabled_fields.split(","):[];-1===$.inArray(fid,change_e_disabled_fields)&&cinput.trigger("change",[{mt:!0}]),"E001"==ftype&&cfield.attr("data-name")&&(fid=cfield.data("name")),thwcfe_public_price.may_calculate_extra_cost(),disable_field_validations(cfield)}add_to_disabled_fields(fid,ship_to_diff_addr_trgr)}function show_field(cfield,needSetup){var fid="";if(cfield.hasClass("thwcfe-html-field-wrapper"))cfield.show(),fid=cfield.data("name");else{var cinput=get_input_elm(cfield);if(!cinput.hasClass("thwcfe-disabled-field")&&!cfield.hasClass("thwcfe-disabled-field-wrapper"))return;if(is_disabled_shipping_field(cfield))return;var ftype=cinput.getType();fid=get_input_id(cinput,ftype),cfield.show(),set_field_value(cinput,ftype),cfield.removeClass("thwcfe-disabled-field-wrapper"),cinput.removeClass("thwcfe-disabled-field");var change_event_disabled_fields=thwcfe_public_var.change_event_disabled_fields,change_e_disabled_fields=change_event_disabled_fields?change_event_disabled_fields.split(","):[];-1===$.inArray(fid,change_e_disabled_fields)&&cinput.trigger("change",[{mt:!0}]),"E001"==ftype&&cfield.attr("data-name")&&(fid=cfield.data("name")),enable_field_validations(cfield)}remove_from_disabled_fields(fid)}function hide_elm(elm,needSetup){"section"===elm.data("rules-elm")?hide_section(elm,needSetup):hide_field(elm,needSetup,!1)}function show_elm(elm,needSetup){"section"===elm.data("rules-elm")?show_section(elm,needSetup):show_field(elm,needSetup)}function enable_disable_shipping_fields(wrapper,enable,ship_to_diff_addr_trgr){wrapper.find(".thwcfe-input-field-wrapper").each(function(){var cfield=$(this);enable?show_field(cfield,!1):hide_field(cfield,!1,ship_to_diff_addr_trgr),cfield.hasClass("thwcfe-shipping-field")||cfield.addClass("thwcfe-shipping-field")})}function validate_condition(condition,valid,needSetup,cfield){if(condition){var operand_type=condition.operand_type,operand=condition.operand,operator=condition.operator,cvalue=condition.value,found=operand.filter(function(element){if(-1!=element.indexOf("shipping_method"))return!0});"field"===operand_type&&operand&&jQuery.each(operand,function(){var field=thwcfe_public_base.getInputField(this);if(thwcfe_public_base.isInputField(field)){var ftype=field.getType(),value=thwcfe_public_base.get_field_value(ftype,field,this);if("empty"===operator&&""!=value)valid=!1;else if("not_empty"===operator&&""==value)valid=!1;else if("value_eq"===operator&&value!=cvalue)valid=!1;else if("value_ne"===operator&&value==cvalue)valid=!1;else if("value_in"===operator){var value_arr=[],cvalue_arr=[];value&&(value_arr=$.isArray(value)?value:value.split(",")),cvalue&&(cvalue_arr=$.isArray(cvalue)?cvalue:cvalue.split(",")),!thwcfe_public_base.is_empty_arr(value_arr)&&thwcfe_public_base.is_subset_of(cvalue_arr,value_arr)||(valid=!1)}else if("value_cn"===operator){var value_arr=[],cvalue_arr=[];value&&(value_arr=$.isArray(value)?value:value.split(",")),cvalue&&(cvalue_arr=$.isArray(cvalue)?cvalue:cvalue.split(",")),thwcfe_public_base.is_subset_of(value_arr,cvalue_arr)||(valid=!1)}else if("value_nc"===operator){var value_arr=[],cvalue_arr=[];value&&(value_arr=$.isArray(value)?value:value.split(",")),cvalue&&(cvalue_arr=$.isArray(cvalue)?cvalue:cvalue.split(","));var intersection=thwcfe_public_base.array_intersection(cvalue_arr,value_arr);thwcfe_public_base.is_empty_arr(intersection)||(valid=!1)}else if("value_gt"===operator)valid=!(!$.isNumeric(value)||!$.isNumeric(cvalue))&&(!(Number(value)<=Number(cvalue))&&valid);else if("value_le"===operator)valid=!(!$.isNumeric(value)||!$.isNumeric(cvalue))&&(!(Number(value)>=Number(cvalue))&&valid);else if("value_sw"!==operator||value.startsWith(cvalue))if("value_nsw"===operator&&value.startsWith(cvalue))valid=!1;else if("date_eq"!==operator||thwcfe_public_base.is_date_eq(field,cvalue))if("date_ne"===operator)field.val()?thwcfe_public_base.is_date_eq(field,cvalue)&&(valid=!1):valid=!1;else if("date_gt"!==operator||thwcfe_public_base.is_date_gt(field,cvalue))if("date_lt"!==operator||thwcfe_public_base.is_date_lt(field,cvalue))if("day_eq"!==operator||thwcfe_public_base.is_day_eq(field,cvalue)){if("day_ne"===operator)field.val()?thwcfe_public_base.is_day_eq(field,cvalue)&&(valid=!1):valid=!1;else if("checked"===operator){var checked=field.prop("checked");valid=!!checked&&valid}else if("not_checked"===operator){var checked=field.prop("checked");valid=!checked&&valid}else if("regex"===operator&&cvalue){var regex=new RegExp(cvalue);regex.test(value)||(valid=!1)}}else valid=!1;else valid=!1;else valid=!1;else valid=!1;else valid=!1;if(needSetup){var depFields=field.data("fields");if(depFields){var depFieldsArr=depFields.split(",");depFieldsArr.push(cfield.prop("id")),depFields=depFieldsArr.toString()}else depFields=cfield.prop("id");field.data("fields",depFields),add_field_value_change_handler(field)}}else thwcfe_public_base.isInputField(field)||0!==found.length||-1!==jQuery.inArray("payment_method",operand)||(valid=!1)})}return valid}function validate_field_condition(cfield,needSetup){var conditionalRules=cfield.data("rules"),conditionalRulesAction=cfield.data("rules-action"),valid=!0,show=!0;if(conditionalRules){try{jQuery.each(conditionalRules,function(){var ruleSet=this;jQuery.each(ruleSet,function(){var rule=this,validRS=!1;jQuery.each(rule,function(){var conditions=this,validCS=!0;jQuery.each(conditions,function(){validCS=validate_condition(this,validCS,needSetup,cfield)}),validRS=validRS||validCS}),valid=valid&&validRS})})}catch(err){alert(err)}show="hide"===conditionalRulesAction?!valid:!!valid,show?show_elm(cfield,needSetup):hide_elm(cfield,needSetup)}}function conditional_field_value_change_listner(event,data){var dep_fields=get_dependant_fields($(this));dep_fields&&dep_fields.length>0&&jQuery.each(dep_fields,function(){if(this.length>0){validate_field_condition($("#"+this),!1)}}),data&&data.mt||thwcfe_public_price.may_calculate_extra_cost()}function add_field_value_change_handler(field){field.off("change",conditional_field_value_change_listner),field.on("change",conditional_field_value_change_listner)}function validate_all_conditions(wrapper){var cfield_elm=null,csection_elm=null;wrapper?(cfield_elm=wrapper.find(".thwcfe-conditional-field"),csection_elm=wrapper.find(".thwcfe-conditional-section")):(cfield_elm=$(".thwcfe-conditional-field"),csection_elm=$(".thwcfe-conditional-section")),cfield_elm.length>0&&cfield_elm.each(function(){validate_field_condition($(this),!0)}),csection_elm.length>0&&csection_elm.each(function(){validate_field_condition($(this),!0)})}function prepare_shipping_conitional_fields(elm,trigger_price_calc){var ship_to_different_address_elm="#ship-to-different-address-checkbox";if(thwcfe_public_var.use_custom_ship_to_different_address_css_selector)var ship_to_different_address_elm=thwcfe_public_var.custom_ship_to_different_address_css_selector;var shipping_wrapper=$(".woocommerce-shipping-fields"),ship_to_different_address=$(ship_to_different_address_elm).is(":checked");enable_disable_shipping_fields(shipping_wrapper,ship_to_different_address,!0),enable_disable_price_fields(shipping_wrapper,ship_to_different_address,!1),ship_to_different_address&&validate_all_conditions(shipping_wrapper),trigger_price_calc&&thwcfe_public_price.may_calculate_extra_cost()}return{validate_field_condition:validate_field_condition,validate_all_conditions:validate_all_conditions,prepare_shipping_conitional_fields:prepare_shipping_conitional_fields,conditional_field_value_change_listner:conditional_field_value_change_listner}}(window.jQuery,window,document),thwcfe_public_file_upload=function($,window,document){"use strict";function setup_file_upload(wrapper,data){setup_preview_on_page_load(wrapper,data),wrapper.find(".thwcfe-checkout-file").on("change",upload_file)}function setup_preview_on_page_load(form,data){form.find("input.thwcfe-checkout-file-value").each(function(){var wrapper=$(this).closest(".thwcfe-input-field-wrapper");if($(this).val())try{var files=JSON.parse($(this).val());if(Array.isArray(files))return void clean_file_input(wrapper);if(files&&0===Object.keys(files).length&&files.constructor===Object)clean_file_input(wrapper);else{var prev_html="";$.each(files,function(n,file){prev_html+=prepare_preview_html(file)});wrapper.find(".thwcfe-remove-uploaded").show(),wrapper.find(".thwcfe-upload-preview").html(prev_html),wrapper.find(".thwcfe-uloaded-files").show(),thwcfe_public_var.show_file_upload_button_after_upload?wrapper.find(".thwcfe-checkout-file").show():(wrapper.find(".thwcfe-checkout-file").hide(),wrapper.find(".thwcfe-btn-file-upload").hide())}}catch(e){clean_file_input(wrapper)}})}function upload_file(event){var files=event.target.files,wrapper=($("#"+event.target.id).parent(),$(this).closest(".thwcfe-input-field-wrapper")),input=wrapper.find(".thwcfe-checkout-file-value"),prev_value=input.val(),field_name=input.attr("name"),nonce=input.attr("data-nonce"),data=new FormData,uploaded_size=0;data.append("action","thwcfe_file_upload"),data.append("field_name",field_name),data.append("security",nonce),data.append("prev_value",prev_value),$.each(files,function(key,value){data.append("file[]",value),uploaded_size+=value.size});var wp_max_upload_size=parseInt(thwcfe_public_var.wp_max_upload_size);if(uploaded_size>wp_max_upload_size){var data={response:"ERROR",error:thwcfe_public_var.wp_max_upload_size_warning};return add_message(wrapper,data,"error"),void clean_file_input(wrapper)}$.ajax({type:"POST",url:thwcfe_public_var.ajax_url,data:data,cache:!1,dataType:"json",processData:!1,contentType:!1,beforeSend:function(){wrapper.find(".thwcfe-file-upload-status").show(),input.val(""),clear_message(wrapper)}}).done(function(data,textStatus,jqXHR){show_uploaded_files(data,input,wrapper)}).fail(function(jqXHR,textStatus,error){add_message(wrapper,data,"error"),clean_file_input(wrapper)}).always(function(){wrapper.find(".thwcfe-file-upload-status").hide()})}function show_uploaded_files(data,input,wrapper){if(!$.isEmptyObject(data)){var prev_html="",filenames=[],uploaded_obj={},error_data="";$.each(data,function(index,rdata){var filenames_arr=[];if("SUCCESS"==rdata.response){var uploaded=rdata.uploaded;if(uploaded){$(uploaded).each(function(index,uploaded_item){var item_name=uploaded_item.name;item_name&&-1==$.inArray(item_name,filenames_arr)&&filenames_arr.push(item_name)}),filenames_arr.length&&filenames.push(filenames_arr.toString()),uploaded_obj[uploaded.name]=uploaded,prev_html+=prepare_preview_html(uploaded),clean_file_input(wrapper),input.val(JSON.stringify(uploaded_obj)),input.attr("data-file-name",filenames.join(", "));wrapper.find(".thwcfe-remove-uploaded").show(),wrapper.find(".thwcfe-upload-preview").html(prev_html),wrapper.find(".thwcfe-uloaded-files").show(),thwcfe_public_var.show_file_upload_button_after_upload?wrapper.find(".thwcfe-checkout-file").show():(wrapper.find(".thwcfe-checkout-file").hide(),wrapper.find(".thwcfe-btn-file-upload").hide())}}else{error_data+="<br>"+index+" - "+rdata.error;add_message(wrapper,{response:"ERROR",error:error_data},"error"),clean_file_input(wrapper)}}),input.trigger("change")}}function prepare_preview_html(uploaded){var file_size="";$.isNumeric(uploaded.size)&&(file_size=uploaded.size/1e3,file_size=Math.round(file_size),file_size+=" KB");var prev_html='<span class="thwcfe-uloaded-file-list"><span class="thwcfe-uloaded-file-list-item">';return prev_html+='<span class="thwcfe-columns">',-1!==$.inArray(uploaded.type,IMG_FILE_TYPES)&&(prev_html+='<span class="thwcfe-column-thumbnail">',prev_html+='<a href="'+uploaded.url+'" target="_blank"><img src="'+uploaded.url+'" ></a>',prev_html+="</span>"),prev_html+='<span class="thwcfe-column-title">',prev_html+='<span title="'+uploaded.name+'" class="title"><a href="'+uploaded.url+'" target="_blank">'+uploaded.name+"</a></span>",file_size&&(prev_html+='<span class="size">'+file_size+"</span>"),prev_html+="</span>",prev_html+='<span class="thwcfe-column-actions">',prev_html+='<a href="#" onclick="thwcfeRemoveUploaded(this, event); return false;" class="thwcfe-action-btn thwcfe-remove-uploaded" title="Remove" data-file="'+uploaded.file+'">X</a>',prev_html+="</span>",prev_html+="</span>",prev_html+="</span></span>"}function remove_uploaded(elm,event){var wrapper=$(elm).closest(".thwcfe-input-field-wrapper"),file=($(elm).closest(".thwcfe-uloaded-file-list"),$(elm).data("file")),field_name=$(wrapper).find("input.thwcfe-checkout-file-value").attr("name"),file_names=$(wrapper).find("input.thwcfe-checkout-file-value").attr("data-file-name"),file_names_arr=file_names.split(","),uploaded_val=$(wrapper).find("input.thwcfe-checkout-file-value").val(),nonce=$(wrapper).find("input.thwcfe-checkout-file-value").attr("data-nonce"),data={action:"thwcfe_remove_uploaded",user_id:thwcfe_public_var.user_id,field_name:field_name,security:nonce,file:file};$.ajax({type:"POST",url:thwcfe_public_var.ajax_url,data:data,cache:!1,dataType:"json",beforeSend:function(){wrapper.find(".thwcfe-uloaded-files").hide(),wrapper.find(".thwcfe-file-upload-status").show(),clear_message(wrapper)}}).done(function(data,textStatus,jqXHR){if("SUCCESS"==data.response){clear_uploaded(elm,wrapper);var UploadedVal=JSON.parse(uploaded_val);for(var f_key in UploadedVal)if(UploadedVal.hasOwnProperty(f_key)){var FileVal=UploadedVal[f_key];if(FileVal.hasOwnProperty("file")&&FileVal.file==file){delete UploadedVal[f_key];var file_name_key=file_names_arr.indexOf(f_key);file_names_arr.splice(file_name_key,1)}}UploadedVal&&0===Object.keys(UploadedVal).length&&UploadedVal.constructor===Object?clean_file_input(wrapper):($(wrapper).find("input.thwcfe-checkout-file-value").val(JSON.stringify(UploadedVal)),$(wrapper).find("input.thwcfe-checkout-file-value").attr("data-file-name",file_names_arr.join(", ")),$(wrapper).find("input.thwcfe-checkout-file-value").trigger("change"))}}).fail(function(jqXHR,textStatus,error){wrapper.find(".thwcfe-uloaded-files").show(),add_message(wrapper,error,"error")}).always(function(){wrapper.find(".thwcfe-file-upload-status").hide()})}function clear_uploaded(elm,wrapper){$(elm).data("file",""),$(elm).hide();var upload_list=$(elm).closest(".thwcfe-uloaded-file-list");wrapper.find(".thwcfe-uloaded-file-list").length<=1?(clean_file_input(wrapper),wrapper.find(".thwcfe-upload-preview").html(""),wrapper.find(".thwcfe-uloaded-files").hide(),wrapper.find(".thwcfe-checkout-file").show(),wrapper.find(".thwcfe-btn-file-upload").show()):(wrapper.find(".thwcfe-uloaded-files").show(),upload_list.remove())}function change_uploaded(elm,event){var wrapper=$(elm).closest(".thwcfe-input-field-wrapper");wrapper.find(".thwcfe-remove-uploaded").hide(),wrapper.find(".thwcfe-input-file").show()}function clean_file_input(wrapper){var input=wrapper.find(".thwcfe-checkout-file-value");wrapper.find(".thwcfe-checkout-file").val(""),input.val(""),input.attr("data-file-name",""),input.trigger("change")}function add_message(wrapper,data,type){data.response&&data.error?(wrapper.find(".thwcfe-file-upload-msg").html(data.error),wrapper.find(".thwcfe-file-upload-msg").show()):clear_message(wrapper)}function clear_message(wrapper){wrapper.find(".thwcfe-file-upload-msg").html(""),wrapper.find(".thwcfe-file-upload-msg").hide()}var IMG_FILE_TYPES=["image/jpg","image/png","image/gif","image/jpeg"];return{setup_file_upload:setup_file_upload,remove_uploaded:remove_uploaded,change_uploaded:change_uploaded,prepare_preview_html:prepare_preview_html,clean_file_input:clean_file_input}}(window.jQuery,window,document),thwcfe_public_price=function($,window,document){"use strict";function is_active_price_field(elm){var result=!0;return(elm.hasClass("thwcfe-disabled-field")||elm.hasClass("thwcfe-disabled-shipping-field"))&&(result=!1),result}function is_multiselect_field(elm,type){var multiple=0;return"checkbox"==type?multiple=elm.data("multiple"):"select"==type&&elm.attr("multiple")&&(multiple=1),multiple}function get_price_field_value(elm,type,name){var value=thwcfe_public_base.get_field_value(type,elm,name);return"radio"===type?value=elm.is(":checked")?value:"":"file"===type&&(value=elm.attr("data-file-name"),value=value||""),value}function setup_price_fields(wrapper,data){wrapper.find(".thwcfe-price-field").off("change",thwcfe_public_conditions.conditional_field_value_change_listner),wrapper.find(".thwcfe-price-field").on("change",thwcfe_public_conditions.conditional_field_value_change_listner)}function get_selected_options(elm,name,type,multiple){var options=null;return"select"===type?options=elm.find("option:selected"):"radio"===type?elm.is(":checked")&&(options=elm):"checkbox"===type&&multiple&&(options=$("input[type=checkbox][name='"+name+"[]']:checked")),options}function prepare_price_props_for_selected_options(elm,name,type,multiple){var price_props=null,oPrice="",oPriceType="",options=get_selected_options(elm,name,type,multiple);return options&&(multiple?options.each(function(){var oprice=$(this).data("price"),opriceType=$(this).data("price-type");oprice&&(opriceType=opriceType||"normal",oPrice.trim()&&(oPrice+=","),oPriceType.trim()&&(oPriceType+=","),oPrice+=oprice,oPriceType+=opriceType)}):(oPrice=options.data("price"),oPriceType=options.data("price-type"),oPriceType=oPriceType||"normal"),thwcfe_public_base.isEmpty(oPrice)||thwcfe_public_base.isEmpty(oPriceType)||(price_props={price:oPrice,priceType:oPriceType})),price_props}function prepare_price_data(){var priceInfoArr={},price_field_elms=$(".thwcfe-price-field");return price_field_elms.length>0&&price_field_elms.each(function(){var pfield=$(this);if(is_active_price_field(pfield)){var ftype=pfield.getType();pfield.hasClass("thwcfe-checkout-file-value")&&(ftype="file");var multiple=is_multiselect_field(pfield,ftype),id=pfield.prop("id"),name=thwcfe_public_base.get_field_name(ftype,pfield.prop("name"),id,multiple),value=get_price_field_value(pfield,ftype,name),qtyField="",label=pfield.data("price-label"),price=pfield.data("price"),priceType=pfield.data("price-type"),priceUnit=pfield.data("price-unit"),taxable=pfield.data("taxable"),tax_class=pfield.data("tax-class");if(thwcfe_public_base.isInputChoiceField(ftype,multiple)){var price_props=prepare_price_props_for_selected_options(pfield,name,ftype,multiple);price_props?(price=price_props.price,priceType=price_props.priceType):(price=0,priceType="")}if(priceType&&"dynamic"===priceType?!$.isNumeric(priceUnit)&&$("#"+priceUnit).length&&(qtyField=$("#"+priceUnit).val(),priceUnit=1):priceUnit=0,value&&name&&(price||0==price||priceType&&"custom"===priceType)){var priceInfo={};priceInfo.name=name,priceInfo.label=label,priceInfo.price=price,priceInfo.price_type=priceType,priceInfo.price_unit=priceUnit,priceInfo.value=value,priceInfo.qty_field=qtyField,priceInfo.taxable=taxable,priceInfo.tax_class=tax_class,priceInfo.multiple=multiple,priceInfoArr[name]=priceInfo}}}),priceInfoArr}function calculate_extra_cost_legacy(){if($(".thwcfe-price-field").length>0){var priceInfoArr=prepare_price_data(),data={action:"thwcfe_calculate_extra_cost",price_info:JSON.stringify(priceInfoArr)};currRequest=$.ajax({type:"POST",url:thwcfe_public_var.ajax_url,data:data,beforeSend:function(jqxhr){null!=currRequest&&currRequest.abort(),jqxhr.uid=get_unique_request_id(),this.data=this.data+"&uid="+jqxhr.uid},success:function(code){$("body").trigger("update_checkout")}})}}function get_unique_request_id(){return $.isNumeric(lastRequestId)&&lastRequestId>0?lastRequestId+=1:lastRequestId=Math.floor(1e8+9e8*Math.random()),lastRequestId}function calculate_extra_cost(){if($(".thwcfe-price-field").length>0){set_price_data_hf();var data={action:"thwcfe_calculate_extra_cost"};currRequest=$.ajax({type:"POST",url:thwcfe_public_var.ajax_url,data:data,beforeSend:function(jqxhr){null!=currRequest&&currRequest.abort()},complete:function(code){$("body").trigger("update_checkout")}})}}function set_price_data_hf(){var price_data=prepare_price_data();$('input[name="thwcfe_price_data"]').val(encodeURIComponent(JSON.stringify(price_data)))}function may_calculate_extra_cost(){thwcfe_public_var.extra_cost_legacy_call?calculate_extra_cost_legacy():calculate_extra_cost()}var currRequest=null,lastRequestId=null;return{setup_price_fields:setup_price_fields,may_calculate_extra_cost:may_calculate_extra_cost}}(window.jQuery,window,document),thwcfe_public_repeat=function($,window,document){"use strict"}(window.jQuery,window,document),thwcfe_public_checkout=function($){"use strict";function initialize_thwcfe_checkout(){var checkout_form=$('form[name="checkout"]');checkout_form&&(init_thwcfe_checkout_form(checkout_form),$(document).on("updated_checkout",function(){init_thwcfe_order_review_panel()}),$(document).on("country_to_state_changed",function(){checkout_form=$('form[name="checkout"]');var statebox=checkout_form.find("#billing_state, #shipping_state");statebox&&statebox.addClass("thwcfe-input-field")}),setup_update_totals_on_change(checkout_form),setTimeout(function(){thwcfe_public_conditions.validate_all_conditions(null),thwcfe_public_conditions.prepare_shipping_conitional_fields(null,!1),thwcfe_public_price.may_calculate_extra_cost()},500))}function init_thwcfe_checkout_form(checkout_form){if(checkout_form){thwcfe_public_base.setup_enhanced_select(checkout_form,"thwcfe-enhanced-select",thwcfe_public_var),thwcfe_public_base.setup_enhanced_select(checkout_form,"thwcfe-enhanced-multi-select",thwcfe_public_var),thwcfe_public_base.setup_date_picker(checkout_form,"thwcfe-checkout-date-picker",thwcfe_public_var),thwcfe_public_base.setup_time_picker(checkout_form,"thwcfe-checkout-time-picker",thwcfe_public_var),thwcfe_public_base.setup_time_picker_linked_date(checkout_form,"thwcfe-checkout-date-picker",thwcfe_public_var),thwcfe_public_file_upload.setup_file_upload(checkout_form,thwcfe_public_var),thwcfe_public_price.setup_price_fields(checkout_form,thwcfe_public_var);var ship_to_different_address_elm="#ship-to-different-address-checkbox";if(thwcfe_public_var.use_custom_ship_to_different_address_css_selector)var ship_to_different_address_elm=thwcfe_public_var.custom_ship_to_different_address_css_selector;$(ship_to_different_address_elm).click(function(){thwcfe_public_conditions.prepare_shipping_conitional_fields(this,!0)}),thwcfe_public_address_i18n.locale_override_fix()}}function init_thwcfe_order_review_panel(){var review_wrapper=$("#order_review");review_wrapper&&(thwcfe_public_base.setup_enhanced_select(review_wrapper,"thwcfe-enhanced-select",thwcfe_public_var),thwcfe_public_base.setup_enhanced_select(review_wrapper,"thwcfe-enhanced-multi-select",thwcfe_public_var),thwcfe_public_base.setup_date_picker(review_wrapper,"thwcfe-checkout-date-picker",thwcfe_public_var),thwcfe_public_base.setup_time_picker(review_wrapper,"thwcfe-checkout-time-picker",thwcfe_public_var),thwcfe_public_file_upload.setup_file_upload(review_wrapper,thwcfe_public_var),thwcfe_public_var.rebind_all_cfields?thwcfe_public_conditions.validate_all_conditions(null):thwcfe_public_conditions.validate_all_conditions(review_wrapper),thwcfe_public_price.setup_price_fields(review_wrapper,thwcfe_public_var))}function setup_update_totals_on_change(wrapper){wrapper.find(".thwcfe_update_totals_on_change").change(function(){$(this).trigger("update_checkout")})}return $(".thwcfe-mask-input").each(function(){thwcfe_public_base.apply_input_masking(this),$(this).val()&&$(this).trigger("blur")}),$(document.body).on("input",function(event){thwcfe_public_var.enable_inline_validations&&$(".input-text").on("input blur change",function(){var parent=$(this).closest(".form-row"),validated=!0,required=parent.is(".validate-required"),validate_email=parent.is(".validate-email"),validate_phone=parent.is(".validate-phone"),validate_url=parent.is(".validate-url"),validate_num=parent.is(".validate-number"),minLength=$(this).attr("minlength");$(this).attr("maxlength");if(required&&""===$(this).val()&&(parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),parent.find("span.thwcfe-required-error").length?parent.find("span.thwcfe-email-error").length?parent.find(".thwcfe-email-error").remove():parent.find("span.thwcfe-phone-error").length?parent.find(".thwcfe-phone-error").remove():parent.find("span.thwcfe-url-error").length?parent.find(".thwcfe-url-error").remove():parent.find("span.thwcfe-min-len-error").length?parent.find(".thwcfe-min-len-error").remove():parent.find("span.thwcfe-num-error").length&&parent.find(".thwcfe-num-error").remove():parent.append($('<span class="thwcfe-required-error" >'+thwcfe_public_var.required_validation+"</span>")),validated=!1),validate_email){
var pattern=new RegExp(/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i);pattern.test($(this).val())||(""!=$(this).val()?(parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email woocommerce-invalid-phone"),validated=!1,parent.find("span.thwcfe-email-error").length||(parent.append($('<span class="thwcfe-email-error" >'+thwcfe_public_var.email_validation+"</span>")),parent.find("span.thwcfe-required-error").length&&parent.find(".thwcfe-required-error").remove())):required||""!=$(this).val()||(validated=!1,parent.find("span.thwcfe-email-error").length&&(parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone"),parent.find(".thwcfe-email-error").remove())))}if(validate_phone){var pattern=new RegExp(/[\s\#0-9_\-\+\/\(\)\.]/g);0<$(this).val().replace(pattern,"").length&&(""!=$(this).val()?(parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid"),validated=!1,parent.find("span.thwcfe-phone-error").length||(parent.append($('<span class="thwcfe-phone-error" >'+thwcfe_public_var.phone_validation+"</span>")),parent.find("span.thwcfe-required-error").length&&parent.find(".thwcfe-required-error").remove())):required||""!=$(this).val()||(validated=!1,parent.find("span.thwcfe-phone-error").length&&(parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone"),parent.find(".thwcfe-phone-error").remove())))}if(validate_url){var pattern=new RegExp(/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i);pattern.test($(this).val())||(""!=$(this).val()?(parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid"),validated=!1,parent.find("span.thwcfe-url-error").length||(parent.append($('<span class="thwcfe-url-error" >'+thwcfe_public_var.url_validation+"</span>")),parent.find("span.thwcfe-required-error").length&&parent.find(".thwcfe-required-error").remove())):required||""!=$(this).val()||(validated=!1,parent.find("span.thwcfe-url-error").length&&(parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone"),parent.find(".thwcfe-url-error").remove())))}minLength&&$(this).val().length<minLength&&(""!=$(this).val()?(parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),validated=!1,parent.find("span.thwcfe-min-len-error").length||(parent.append($('<span class="thwcfe-min-len-error" >'+thwcfe_public_var.minlength_validation+"</span>")),parent.find("span.thwcfe-required-error").length&&parent.find(".thwcfe-required-error").remove())):required||""!=$(this).val()||(validated=!1,parent.find("span.thwcfe-min-len-error").length&&(parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone"),parent.find(".thwcfe-min-len-error").remove()))),validate_num&&($.isNumeric($(this).val())||(""!=$(this).val()?(parent.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),validated=!1,parent.find("span.thwcfe-num-error").length||(parent.append($('<span class="thwcfe-num-error" >'+thwcfe_public_var.number_validation+"</span>")),parent.find("span.thwcfe-required-error").length&&parent.find(".thwcfe-required-error").remove())):required||""!=$(this).val()||(validated=!1,parent.find("span.thwcfe-num-error").length&&(parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone"),parent.find(".thwcfe-num-error").remove())))),validated&&(parent.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone").addClass("woocommerce-validated"),parent.find("span.thwcfe-required-error").remove(),parent.find("span.thwcfe-email-error").remove(),parent.find("span.thwcfe-phone-error").remove(),parent.find("span.thwcfe-url-error").remove(),parent.find("span.thwcfe-min-len-error").remove(),parent.find("span.thwcfe-num-error").remove())})}),initialize_thwcfe_checkout(),{initialize_thwcfe_checkout:initialize_thwcfe_checkout}}(jQuery);